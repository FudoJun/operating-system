操作系统运行机制

1、CPU分为内核态和用户态.

2、内核态和用户态通过程序状态寄存器PSW区分.

3、仅内核态下可执行特权命令.

4、内核态使用特权命令修改PSW标志位，从而切换到用户态；用户态触发中断时切换到内核态.

![image](https://github.com/FudoJun/operating-system/assets/54784415/2c8a1458-5fac-4dce-bab6-f5400ae7c2e4)


中断和异常

1、中断分为外中断和内中断；内中断与当前执行的命令有关，中断来自于CPU内部；外中断与当前执行的指令无关，中断来自于CPU外部.

2、遇到中断时，CPU根据不同的中断类型，查询中断向量表来获得处理不同中断对应的中断处理程序.

![image](https://github.com/FudoJun/operating-system/assets/54784415/7b891b74-8348-44f9-9774-8cc37979c7f4)

![image](https://github.com/FudoJun/operating-system/assets/54784415/ebf1a37d-a43c-4af3-af30-eb413b53c5d4)

系统调用

![image](https://github.com/FudoJun/operating-system/assets/54784415/49d50e70-c95e-4cec-9d3d-3557cc559763)

操作系统体系结构

1、内核是操作系统最核心的部分，由一系列内核程序组成，必须运行在内核态.

![image](https://github.com/FudoJun/operating-system/assets/54784415/518ceefa-5151-4e50-84b2-1c2ec0ac7b91)

2、内核中仅保留和硬件最紧密连接部分功能的设计称为微内核；保留进程管理等与硬件不直接联系的功能的设计被成为大内核.

![image](https://github.com/FudoJun/operating-system/assets/54784415/0fda5910-1466-4a67-b540-4a9378581479)

3、大内核代码庞大，难以维护，高性能；微内核结构清晰，易于维护，性能低；主要对比如下.

![image](https://github.com/FudoJun/operating-system/assets/54784415/03ac32d3-48ca-41b5-97dd-ba3e041913d0)

操作系统引导（开机过程）

![image](https://github.com/FudoJun/operating-system/assets/54784415/0ce76eda-84f1-4049-85ee-434c9dc8fd30)

